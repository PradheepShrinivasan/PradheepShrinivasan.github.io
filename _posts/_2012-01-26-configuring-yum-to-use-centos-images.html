---
layout: post
title: Configuring Yum to use CentOS Images (CD/DVD images)
date: '2012-01-27T00:07:00.001+05:30'
author: pradheep
tags:
- CentOS
- fstab
- Configuring YUM
- Mounting DVD on linux
- yum
- CD/DVD image
- Auto mounting image using fstab
modified_time: '2014-09-16T06:34:23.204+05:30'
blogger_id: tag:blogger.com,1999:blog-9112250870065864556.post-4411485550489099079
blogger_orig_url: http://pradheepshrinivasan.blogspot.com/2012/01/configuring-yum-to-use-centos-images.html
---

Recently i was asked to set up linux boxes for our lab systems and so i started installed CentOS in the linux machines. The installation process was easy, mostly using the default configuration.However there was one issue, the lab machines did not have cd players and access to the internet was restricted.<br /><br />We needed a mechanism to set up to install packages to without using DVD drive or connecting to the internet. We thought why not copy the iso images to the linux boxes and set the package manager (YUM) to use the iso image ? We did the same and i will now explain how we set up them image.<br /><br />First lets assume that the DVD image (.iso) is copied to some directory say /home/centos/Centos.iso.The first step is to mount the image to the file system.<br /><div style="color: #6aa84f;">$mkdir /mnt/centos</div><div style="color: lime;"><span style="color: #6aa84f;">$mount -o loop -t iso9660 /home/centos/centos.iso /mnt/centos</span></div><br />Now you can view the content of the centos. check it using<br /><div style="color: #6aa84f;">$ls /mnt/centos</div><br />The next step is to configure yum to look for the file we have just now mounted<br /><br /><div style="color: #6aa84f;">$vim /etc/yum.repos.d/CentOS-Media.repo</div><br />add the mount path to the file and then set the enabled in the file to 1<br /><div style="color: #6aa84f;">file:///mnt/centos</div><div style="color: #6aa84f;">enabled =1</div>Save the changes and exit.Note:You have to be root to do all these changes<br /><br />Now you have to disable the base repo else yum will be complaining unable to load the base repository file<br /><div style="color: #6aa84f;">$vim /etc/yum.repo.d/CentOS-Base.repo</div><br />Add enabled to 0 in all the repository and if enabled is set to 1 change it&nbsp; 0<br /><div style="color: #6aa84f;">enabled=0</div>Save changes and exit from the editor<br /><br /><br />Now we need to ask yum to clean all the meta data and start the update all<br /><span style="color: #6aa84f;">$yum clean all</span><br /><div style="color: #6aa84f;">$yum update all</div><br />You will see that the files are read from the mount point in the log that is printed.You can now install any package by using the following command<br /><div style="color: #6aa84f;">$yum install pacakgename</div><br />We can make the mounting to the filesystem automatic&nbsp; by adding the following to /etc/fstab<br /><div style="color: #6aa84f;">$vim /etc/fstab</div><div style="color: #6aa84f;">/home/centos/centos.iso &nbsp; &nbsp; /mnt/centos &nbsp; iso9660 loop,auto,ro&nbsp; 0 0&nbsp;</div><br />Save the changes and exit and the next time you boot up , you need not do the above configuration once again.