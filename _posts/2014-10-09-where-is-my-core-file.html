---
layout: post
title: Where is my core file ?
date: '2014-10-09T16:00:00.002+05:30'
author: pradheep
tags: 
modified_time: '2014-10-09T16:00:53.570+05:30'
blogger_id: tag:blogger.com,1999:blog-9112250870065864556.post-3900589184547903729
blogger_orig_url: http://pradheepshrinivasan.blogspot.com/2014/10/where-is-my-core-file.html
---

Recently i was testing <a href="http://www.canonware.com/jemalloc/" target="_blank">jemalloc</a> for detecting memory corruptions of the program.This was tested by writing programs that intentionally crash and looking for jemalloc to abort and raise errors.<br /><br />On my ubuntu machine, i found that program was not generating core. I was confused. So the first thing to check is to ulimit. <br /><br /><pre style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> pradheep@PradheepVM:~/jemalloc$ ulimit  <br /> unlimited  <br /></code></pre><br />The default output says unlimited. So looked at the man page of bash(1) this defaults to -f which is "The maximum size of files written by the shell and its children".<br /><br />So looking at ulimit -a<br /><pre nbsp="" style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> pradheep@PradheepVM:/$ ulimit -a &nbsp;<br />&nbsp;core file size&nbsp;&nbsp;&nbsp;&nbsp; (blocks, -c) 0 <br />&nbsp;data seg size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (kbytes, -d) unlimited &nbsp;<br />&nbsp;scheduling priority&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-e) 0&nbsp; </code></pre><br />Now we need to set the core value to unlimited.This can be done using<br /><pre nbsp="" style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> ulimit -c unlimited</code></pre><br />The output should be<br /><pre nbsp="" style="background-image: URL(http://2.bp.blogspot.com/_z5ltvMQPaa8/SjJXr_U2YBI/AAAAAAAAAAM/46OqEP32CJ8/s320/codebg.gif); background: #f0f0f0; border: 1px dashed #CCCCCC; color: black; font-family: arial; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> pradheep@PradheepVM:/$ ulimit -a&nbsp; <br />&nbsp;core file size&nbsp;&nbsp;&nbsp;&nbsp; (blocks, -c) unlimited&nbsp; <br />&nbsp;data seg size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (kbytes, -d) unlimited&nbsp; <br />&nbsp;scheduling priority&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-e) 0&nbsp; <br />&nbsp;file size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (blocks, -f) unlimited&nbsp; <br />&nbsp;pending signals&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-i) 7402&nbsp; <br />&nbsp;max locked memory&nbsp;&nbsp;&nbsp; (kbytes, -l) 64&nbsp; <br />&nbsp;max memory size&nbsp;&nbsp;&nbsp;&nbsp; (kbytes, -m) unlimited&nbsp; <br />&nbsp;open files&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-n) 1024&nbsp; <br />&nbsp;pipe size&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (512 bytes, -p) 8&nbsp; </code></pre>This is set only on the shell you have run, to set the value permentenly on all the new shells that are spawned you should edit <span style="font-family: Courier New;"><b>$HOME/.bashrc&nbsp;</b>to add ulimit -c unlimited</span><br /><span style="font-family: Courier New;"><br /></span><span style="font-family: Courier New;">In all your new shell invocation you will be provided with unlimited core size dump.</span><br /><span style="font-family: Courier New;"><br /></span><span style="font-family: Courier New;">More info on setting core dump can be found <a href="http://www.akadia.com/services/ora_enable_core.html" target="_blank">here</a>.</span><br /><br /><span style="font-family: Courier New;">Additional info on core file dumps can be found in the following links</span><br /><span style="font-family: Courier New;">[1]&nbsp;<a href="http://stackoverflow.com/questions/7732983/core-dump-file-is-not-generated" target="_blank">http://stackoverflow.com/questions/7732983/core-dump-file-is-not-generated</a></span><br /><span style="font-family: Courier New;">[2] <a href="http://askubuntu.com/questions/295765/upstart-and-core-files" target="_blank">http://askubuntu.com/questions/295765/upstart-and-core-files</a>&nbsp; </span><br /><span style="font-family: Courier New;"><br /></span><span lang="en-us"><span style="font-family: Courier New;"><b><br />            </b></span></span><br /><span lang="en-us"><span style="font-family: Courier New;"><b><br />            </b></span></span>